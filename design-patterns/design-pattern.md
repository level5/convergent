# 设计模式

## 如何描述设计模式？

- 模式名和分类

- 意图

  设计模式是做什么的？他的基本原理和意图是什么？解决的是什么样的特定设计问题？

- 别名

- 动机

  用以说明一个设计问题以及如何用模式中的类，对象来解决问题的特定情景。

- 适应性

  什么情况下可以使用设计模式，该设计模式可以用来改进哪些不良设计？

- 结构

- 参与者

  设计模式中的类和对象，以及他们各自的职责。

- 协作

  参与者怎样协作以实现他们的职责

- 效果

- 实现

- 代码示例

- 已知应用

- 相关模式

## 组织


#### 目的准则

模式是用来完成什么工作的。

- 创建类

  和对象的创建有关

- 结构型

  处理类或对象的组合

- 行为型

  对类和对象怎么交互，怎么分配职责进行描述


#### 范围准则

模式主要是用于类还是用于对象。

- 类模式

  类与子类之间的关系，这些关系通过继承建立，是静态的。在编译时刻便确定下来了。

- 对象模式

  对象之间的关系，这些关系在运行时刻可以变化，更具动态性。

某种意义上说，几乎所有模式都是用继承机制，所以“类模式”只指那些集中于处理类间关系的模式，而大部分模式都属于对象模式的范畴。


## 设计模式怎么解决设计问题

1. 寻找合适的对象

  最困难的部分：将系统分解成对象集合。要考虑很多因素：

  封装，粒度，依赖关系，灵活性，性能，演化，复用...

  设计的许多对象来源于现实世界的分析模型。但是，设计结果所得到的类通常在现实世界中并不存在。

2. 决定对象的粒度


3. 指定对象接口

  接口的概念，和实现的分离。

  多态

4. 描述对象的实现

  - 类继承和接口继承

    对象的类定义了对象是怎么实现的。接口即对象能够响应的请求的集合。

  - 对接口编程，而不是对实现编程

    - 客户无需知道他们使用对象的特定类型
    - 客户无需知道他们使用的对象使用什么类实现的

## 运用复用机制

#### 继承和组合的比较

- 继承：白箱复用

  优点：静态定义，方便改变被复用的实现。

  缺点：无法在运行是改变，父类对子类可见，破坏封装性。子类的实现与父类有紧密联系。灵活性，继承下来的实现不适合解决新问题时，父类必须重写。

- 对象组合：黑箱复用


***优先使用对象组合，而不是类继承***

#### 委托(delegation)


#### Generic


## 关联运行时刻和编译时刻的结构

aggregation 聚合意味这一个对象拥有另一个对象或者对另一个对象负责。一般称为：一个对象包含另一个对象或者是另一个对象的一部分。

acquaintance 相识意味着一个对象仅仅知道另外一个对象。

这两者很容易混淆，因为他们通常以相同的方式实现。聚合还是相识是由你的意图，而不是由显示的语言机制决定。

## 设计应支持变化

设计模式可以确保系统能够以特定方式变化，从而帮助你避免重新设计系统。

导致重新设计的原因：
- 通过显示的指定一个类来创建对象
- 对特殊操作的依赖
- 对硬件和软件平台的依赖
- 对对象表示或者实现的依赖
- 算法依赖
- 紧耦合
- 通过生成子类来扩充功能
- 不能方便的对类进行修改

## 如何选择设计模式？
